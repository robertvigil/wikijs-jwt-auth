<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sample Blog - Home</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #4a5568 0%, #2d3748 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .nav {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
            max-width: 900px;
            margin: 0 auto 20px;
            padding: 15px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .nav-brand {
            font-size: 20px;
            font-weight: 700;
            color: #4a5568;
        }

        .nav-menu {
            display: flex;
            gap: 20px;
            align-items: center;
        }

        .nav-link {
            color: #333;
            text-decoration: none;
            font-size: 14px;
            font-weight: 500;
            transition: color 0.2s;
        }

        .nav-link:hover {
            color: #4a5568;
        }

        .logout-btn {
            padding: 8px 20px;
            background: linear-gradient(135deg, #4a5568 0%, #2d3748 100%);
            color: white;
            border: none;
            border-radius: 4px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .logout-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(74, 85, 104, 0.4);
        }

        .logout-btn:active {
            transform: translateY(0);
        }

        .container {
            background: white;
            border-radius: 8px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
            max-width: 900px;
            margin: 0 auto;
            padding: 40px;
        }

        h1 {
            color: #333;
            margin-bottom: 15px;
            font-size: 32px;
            line-height: 1.3;
        }

        h2 {
            color: #333;
            margin-top: 30px;
            margin-bottom: 15px;
            font-size: 24px;
        }

        .date {
            color: #888;
            font-size: 14px;
            margin-bottom: 20px;
        }

        .author {
            color: #4a5568;
            font-weight: 600;
        }

        p {
            color: #555;
            line-height: 1.7;
            margin-bottom: 15px;
            font-size: 16px;
        }

        .article {
            border-bottom: 1px solid #e0e0e0;
            padding-bottom: 30px;
            margin-bottom: 30px;
        }

        .article:last-child {
            border-bottom: none;
            margin-bottom: 0;
            padding-bottom: 0;
        }

        .read-more {
            color: #4a5568;
            text-decoration: none;
            font-weight: 600;
            font-size: 14px;
            display: inline-block;
            margin-top: 10px;
            transition: color 0.2s;
        }

        .read-more:hover {
            color: #2d3748;
        }

        .message {
            margin-bottom: 20px;
            padding: 12px;
            border-radius: 4px;
            font-size: 14px;
            display: none;
        }

        .message.success {
            background: #efe;
            color: #3c3;
            border: 1px solid #cfc;
        }

        .message.error {
            background: #fee;
            color: #c33;
            border: 1px solid #fcc;
        }

        .user-badge {
            background: #e2e8f0;
            color: #4a5568;
            padding: 4px 12px;
            border-radius: 4px;
            font-size: 13px;
            font-weight: 600;
        }
    </style>
</head>
<body>
    <nav class="nav">
        <div class="nav-brand">My Sample Blog</div>
        <div class="nav-menu">
            <a href="/" class="nav-link">Home</a>
            <a href="#" class="nav-link">About</a>
            <a href="#" class="nav-link">Contact</a>
            <span class="user-badge" id="userBadge">Loading...</span>
            <button class="logout-btn" id="logoutBtn">Logout</button>
        </div>
    </nav>

    <div class="container">
        <div class="message" id="message"></div>

        <article class="article">
            <h1>Welcome to Our Sample Blog</h1>
            <div class="date">Published on November 26, 2025 by <span class="author">Jane Doe</span></div>
            <p>
                Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore
                et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut
                aliquip ex ea commodo consequat.
            </p>
            <p>
                Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur.
                Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est
                laborum.
            </p>
            <a href="#" class="read-more">Read more →</a>
        </article>

        <article class="article">
            <h2>Getting Started with JWT Authentication</h2>
            <div class="date">Published on November 25, 2025 by <span class="author">John Smith</span></div>
            <p>
                This is a protected page that demonstrates JWT authentication. Since you can see this content,
                you are successfully authenticated! The logout button in the navigation menu allows you to end
                your session.
            </p>
            <p>
                Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium,
                totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae
                dicta sunt explicabo.
            </p>
            <a href="#" class="read-more">Read more →</a>
        </article>

        <article class="article">
            <h2>Understanding Secure Assets</h2>
            <div class="date">Published on November 24, 2025 by <span class="author">Jane Doe</span></div>
            <p>
                Nemo enim ipsam voluptatem quia voluptas sit aspernatur aut odit aut fugit, sed quia consequuntur
                magni dolores eos qui ratione voluptatem sequi nesciunt. Neque porro quisquam est, qui dolorem ipsum
                quia dolor sit amet, consectetur, adipisci velit.
            </p>
            <p>
                Sed quia non numquam eius modi tempora incidunt ut labore et dolore magnam aliquam quaerat voluptatem.
                Ut enim ad minima veniam, quis nostrum exercitationem ullam corporis suscipit laboriosam, nisi ut
                aliquid ex ea commodi consequatur?
            </p>
            <a href="#" class="read-more">Read more →</a>
        </article>
    </div>

    <script>
        // Check authentication status on load
        window.addEventListener('load', checkAuth);

        async function checkAuth() {
            try {
                const response = await fetch('/api/verify');
                const data = await response.json();

                if (data.authenticated) {
                    document.getElementById('userBadge').textContent = data.user.name || data.user.email;
                } else {
                    // Redirect to login if not authenticated
                    window.location.href = '/secure/login';
                }
            } catch (err) {
                console.error('Auth check failed:', err);
                showMessage('Authentication check failed', 'error');
            }
        }

        // Logout button handler
        document.getElementById('logoutBtn').addEventListener('click', async () => {
            try {
                const response = await fetch('/api/logout', {
                    method: 'POST'
                });

                const data = await response.json();

                if (data.success) {
                    showMessage('Logged out successfully. Redirecting...', 'success');
                    setTimeout(() => {
                        window.location.href = '/secure/login';
                    }, 1500);
                } else {
                    showMessage('Logout failed', 'error');
                }
            } catch (err) {
                showMessage('Logout error: ' + err.message, 'error');
            }
        });

        function showMessage(text, type) {
            const messageDiv = document.getElementById('message');
            messageDiv.textContent = text;
            messageDiv.className = 'message ' + type;
            messageDiv.style.display = 'block';

            setTimeout(() => {
                messageDiv.style.display = 'none';
            }, 5000);
        }
    </script>
</body>
</html>
